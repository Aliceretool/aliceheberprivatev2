id: startTrigger
type: datasource
subtype: JavascriptQuery
resourceName: JavascriptQuery
template:
  queryRefreshTime: ''
  allowedGroupIds: []
  streamResponse: false
  lastReceivedFromResourceAt: null
  isFunction: false
  functionParameters: null
  queryDisabledMessage: ''
  servedFromCache: false
  offlineUserQueryInputs: ''
  functionDescription: null
  successMessage: ''
  queryDisabled: ''
  playgroundQuerySaveId: latest
  workflowParams: null
  resourceNameOverride: ''
  runWhenModelUpdates: false
  workflowRunExecutionType: sync
  showFailureToaster: true
  query: |2-

      const evalStartTriggerBlock = () => {
        const getExampleInputJSON = () => {
          try {
            return {
      "id": "01993e4c-1d34-7692-abd8-aa828fb808fc",
      "checkRunId": "01993e4c-1e18-7e9a-be6c-61aac215fcde",
      "createdAt": "2025-09-12T14:19:59.774Z",
      "updatedAt": "2025-09-12T14:19:59.774Z",
      "sfAccountId": "01993e41-a5a8-7ffd-905d-b5fdaf2acf60",
      "sfContactId": "068c428f-371a-7d3b-a520-81952c5c04d3",
      "status": "PENDING",
      "type": "DUPLICATE",
      "checkGroupId": "01993e4c-1d34-7692-abd8-aa9c270e0830",
      "companyId": "1234567",
      "checkValues": [
        {
          "id": "01993e4c-1d34-7692-abd8-aa8370aaa33a",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "COMPANY_NAME",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "Jack's Plumbing 70",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8416594a66",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "EMAIL",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "jack.frankland+70@checkatrade.com",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa859b254a6f",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "MOBILE_PHONE",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "07987654321",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8655dd4afe",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "PHONE",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa87246ad1f0",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "FIRST_NAME",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "Jack",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa881a304680",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "LAST_NAME",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "Frankland",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa89a93acdf6",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "DATE_OF_BIRTH",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "1990-01-01",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8a1a2246b8",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "ADDRESS_LINE_1",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "1 Station Road",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8b8732e315",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "ADDRESS_LINE_2",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8c85cf22bd",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "ADDRESS_CITY",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8d1e125686",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "ADDRESS_COUNTY",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8e5796b6ff",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "ADDRESS_POSTAL_CODE",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "SE22 9LB",
          "valueType": "STRING"
        },
        {
          "id": "01993e4c-1d34-7692-abd8-aa8fbe16acaa",
          "checkId": "01993e4c-1d34-7692-abd8-aa828fb808fc",
          "createdAt": "2025-09-12T14:19:59.774337+00:00",
          "updatedAt": "2025-09-12T14:19:59.774337+00:00",
          "type": "ADDRESS_COUNTRY",
          "source": "PRE_PROVIDED",
          "status": "PENDING",
          "value": "GB",
          "valueType": "STRING"
        }
      ],
      "createdBy": {
        "id": "019855d6-2dbb-7f18-97bb-3802f41ef70d",
        "type": "agent"
      },
      "updatedBy": {
        "id": "019855d6-2dbb-7f18-97bb-38036878c229",
        "type": "agent"
      }
    }
          } catch {
            return { error: true, message: 'Error parsing example input JSON' }
          }
        }
        const getExamplePathParams = () => {
          try {
            return {}
          } catch {
            return { error: true, message: 'Error parsing example path params' }
          }
        }
        const getExampleHeaders = () => {
          try {
            return {}
          } catch {
            return { error: true, message: 'Error parsing example headers' }
          }
        }
        return {
          _retool_exampleInputJSON: getExampleInputJSON(),
          _retool_exampleHeaders: getExampleHeaders(),
          _retool_examplePathParams: getExamplePathParams(),
        }
      }
      return evalStartTriggerBlock()
      
  playgroundQueryUuid: ''
  playgroundQueryId: null
  error: null
  workflowRunBodyType: raw
  privateParams: []
  queryRunOnSelectorUpdate: false
  runWhenPageLoadsDelay: ''
  data: null
  importedQueryInputs: {}
  _additionalScope: []
  isImported: false
  showSuccessToaster: true
  cacheKeyTtl: ''
  requestSentTimestamp: null
  metadata: null
  queryRunTime: null
  changesetObject: ''
  offlineOptimisticResponse: null
  errorTransformer: return data.error
  finished: null
  confirmationMessage: null
  isFetching: false
  changeset: ''
  rawData: null
  queryTriggerDelay: '0'
  resourceTypeOverride: null
  watchedParams: []
  enableErrorTransformer: false
  showLatestVersionUpdatedWarning: false
  timestamp: 0
  evalType: script
  importedQueryDefaults: {}
  enableTransformer: false
  showUpdateSetValueDynamicallyToggle: true
  overrideOrgCacheForUserCache: false
  runWhenPageLoads: false
  transformer: return data
  events: []
  queryTimeout: '10000'
  workflowId: null
  requireConfirmation: false
  queryFailureConditions: ''
  changesetIsObject: false
  enableCaching: false
  allowedGroups: []
  offlineQueryType: None
  queryThrottleTime: '750'
  updateSetValueDynamically: false
  notificationDuration: ''
createdAt: 2025-07-22T13:28:15.053Z
blockData:
  top: -1088
  left: -416
  uuid: 238d4cb9-dced-4883-9a3b-c3743485b1ca
  comment:
    body: >-
      Logic for this check largely comes from:
      https://github.com/cat-home-experts/Salesforce/blob/6c65a65b7091b4ee6ab03fb38645f4f19a671f89/force-app/main/default/classes/DuplicateLeadController.cls#L248
    visible: true
    pluginId: startTrigger-comment
  options: {}
  pluginId: startTrigger
  blockType: webhook
  editorType: JavascriptQuery
  isMinimized: false
  resourceName: JavascriptQuery
  incomingOnSuccessEdges: []
